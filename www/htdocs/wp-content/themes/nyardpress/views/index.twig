{% extends "base.twig" %}

{% block content %}
<nav>
    <p>{{menu.id}} : {{menu.location}} - {{ menu.name }}</p>

    <ul class="nav-main">
        {% for item in menu.items %}
            <li class="nav-main-item {{ item.classes|join(' ') }}">
                <a
                    class="nav-main-link" href="{{ item.link }}"
                    {{ item.is_target_blank ? 'target="_blank"' }}
                >{{ item.title }}</a>

                {% if item.children %}
                    <ul class="nav-drop">
                        {% for child in item.children %}
                            <li class="nav-drop-item">
                                <a
                                    href="{{ child.link }}"
                                    {{ item.is_target_blank ? 'target="_blank"' }}
                                >{{ child.title }}</a>
                            </li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </li>
        {% endfor %}
    </ul>
</nav>
    <div class="posts-container">
        {% if posts %}
            {% for post in posts %}
                <article id="post-{{ post.ID }}" class="post post-{{ post.post_type }}">
                    <header class="entry-header">
                        <h2 class="entry-title">
                            <a href="{{ post.link }}">{{ post.title }}</a>
                        </h2>
                        <div class="entry-meta">
                            <span class="posted-on">
                                <time class="entry-date published" datetime="{{ post.date('Y-m-d\\TH:i:s') }}">
                                    {{ post.date }}
                                </time>
                            </span>
                            <span class="byline">
                                投稿者: <span class="author">{{ post.author.name }}</span>
                            </span>
                        </div>
                    </header>

                    {% if post.thumbnail %}
                        <div class="post-thumbnail">
                            <a href="{{ post.link }}">
                                <img src="{{ post.thumbnail.src('nyardpress-medium') }}" alt="{{ post.title }}">
                            </a>
                        </div>
                    {% endif %}

                    <div class="entry-content">
                        {{ post.excerpt.length(55).read_more('続きを読む') }}
                    </div>

                    <footer class="entry-footer">
                        {% if post.terms('category') %}
                            <span class="cat-links">
                                カテゴリー:
                                {% for term in post.terms('category') %}
                                    <a href="{{ term.link }}">{{ term.name }}</a>{% if not loop.last %}, {% endif %}
                                {% endfor %}
                            </span>
                        {% endif %}
                    </footer>
                </article>
            {% endfor %}

            {% if pagination %}
                <nav class="pagination">
                    {% if pagination.prev %}
                        <a href="{{ pagination.prev.link }}" class="prev">« 前へ</a>
                    {% endif %}
                    {% if pagination.pages %}
                        <ul class="pages">
                            {% for page in pagination.pages %}
                                <li>
                                    {% if page.current %}
                                        <span class="current">{{ page.title }}</span>
                                    {% else %}
                                        <a href="{{ page.link }}" class="{{ page.class }}">{{ page.title }}</a>
                                    {% endif %}
                                </li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                    {% if pagination.next %}
                        <a href="{{ pagination.next.link }}" class="next">次へ »</a>
                    {% endif %}
                </nav>
            {% endif %}
        {% else %}
            <p>投稿が見つかりませんでした。</p>
        {% endif %}
    </div>
{% endblock %}

